(function(t){function e(e){for(var s,o,l=e[0],n=e[1],c=e[2],u=0,h=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&h.push(i[o][0]),i[o]=0;for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);d&&d(e);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,l=1;l<a.length;l++){var n=a[l];0!==i[n]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],n=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=n;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"072f":function(t,e,a){"use strict";a("48e7")},1625:function(t,e,a){"use strict";a("6d56")},"18a6":function(t,e,a){},"1e52":function(t,e,a){"use strict";a("8bf8")},"229b":function(t,e,a){"use strict";a("c441")},3226:function(t,e,a){"use strict";a("c656")},"34c7":function(t,e,a){"use strict";a("950b")},"351f":function(t,e,a){"use strict";a("18a6")},"48e7":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),i=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("keep-alive",[e("router-view")],1)],1)},r=[],o={name:"App",data(){return{}},created(){},methods:{}},l=o,n=(a("bbdd"),a("2877")),c=Object(n["a"])(l,i,r,!1,null,null,null),d=c.exports,u=a("5c96"),h=a.n(u),m=(a("0fae"),a("8c4f")),p=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:16}},[e("el-carousel",{attrs:{height:"400px"}},t._l(t.carouselList,(function(t){return e("el-carousel-item",{key:t},[e("img",{staticStyle:{width:"100%"},attrs:{src:t}})])})),1)],1),e("el-col",{attrs:{span:8}},[e("el-calendar",{attrs:{id:"index_calendar"},model:{value:t.nowDate,callback:function(e){t.nowDate=e},expression:"nowDate"}})],1)],1),e("div",{staticClass:"separate"}),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article-list"},[e("p",[t._v("最新文章")]),t._l(t.article.recent,(function(a){return e("div",{key:a.id,staticClass:"article-node"},[e("div",{staticClass:"article-left"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("img",{attrs:{src:a.firstImg}})])],1),e("div",{staticClass:"article-right"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:{path:"/tag/"+a.label,query:{id:a.id}}}},[t._v(t._s(a.label))])],1)})),1),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("span",[t._v(t._s(a.content)+" ")])])],1),e("p",{staticClass:"article-other"},[e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])])])}))],2)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article-list"},[e("p",[t._v("精选文章")]),e("div",{staticClass:"special-area"},t._l(t.article.special,(function(a){return e("div",{key:a.specialId,staticClass:"special-node"},[e("p",{staticClass:"special-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.specialId}},[t._v(t._s(a.specialTitle))])],1),e("p",{staticClass:"special-other"},[e("span",[e("img",{attrs:{src:void 0===a.authorAvatar?t.userImg:a.authorAvatar}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])],1),e("span",[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(a.views))])])])})),0)])])],1),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article-list"},[e("p",[t._v("最新问答")]),t._l(t.question.recent,(function(a){return e("div",{key:a.id,staticClass:"answer-node"},[e("p",{staticClass:"answer-title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"answer-describe"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.content)+" ")])],1),e("p",{staticClass:"answer-other"},[e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])])}))],2)]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article-list"},[e("p",[t._v("精选问答")]),e("div",{staticClass:"answer-area"},t._l(t.question.special,(function(a){return e("div",{key:a.specialId,staticClass:"special-node"},[e("p",{staticClass:"special-title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.specialId}},[t._v(t._s(a.specialTitle))])],1),e("p",{staticClass:"special-other"},[e("span",[e("img",{attrs:{src:void 0===a.authorAvatar?t.userImg:a.authorAvatar}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])],1),e("span",[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(a.views))])])])})),0)])])],1)],1),e("Footer")],1)},g=[],_=a("cee4"),v=a("852e"),f=a.n(v);_["a"].defaults.withCredentials=!0;const b=_["a"].create({baseURL:"http://47.107.116.42:17890",timeout:5e3});b.interceptors.request.use(t=>(f.a.get("token")&&(t.headers["token"]=f.a.get("token")),t),t=>Promise.reject(t));var C=b,y={getVerifyCode(){return C({url:"/access/code",method:"get"})},login(t){return C({url:"/access/login",method:"post",data:t})},getUserInfo(){return C({url:"/access/getUserInfo",method:"get"})},logout(){return C({url:"/access/logout",method:"post"})},register(t){return C({url:"/access/register",method:"post",data:t})},sendCode(t){return C({url:"/mail/sendCode",method:"post",data:{email:t}})},getCategoryTree(){return C({url:"/kkc/category/treeList",method:"get"})},writeArticle(t){return C({url:"/write/article/write",method:"post",data:t})},writeQuestion(t){return C({url:"/write/question/write",method:"post",data:t})},getIndexArticle(){return C({url:"/kkc/index/article/list",method:"get"})},getIndexQuestion(){return C({url:"/kkc/index/question/list",method:"get"})},getArticleListByCondition(t){return C({url:"/kkc/nav/article",method:"get",params:t})},getQuestionListByCondition(t){return C({url:"/kkc/nav/question",method:"get",params:t})},getArticleShowById(t){return C({url:"/kkc/article/detail",method:"get",params:{id:t}})},getUserAchievementById(t){return C({url:"/kkc/user/achievement",method:"get",params:{id:t}})},getArticleComment(t){return C({url:"/kkc/article/comment",method:"get",params:{id:t}})},postArticleComment(t){return C({url:"/post/article/post",method:"post",data:t})},checkUserFollow(t){return C({url:"/follow/check",method:"post",data:t})},userFollow(t){return C({url:"/follow/confirm",method:"post",data:t})},userCancelFollow(t){return C({url:"/follow/cancel",method:"post",data:t})},getQuestionShowById(t){return C({url:"/kkc/question/detail",method:"get",params:{id:t}})},getQuestionComment(t){return C({url:"/kkc/question/comment",method:"get",params:{id:t}})},postQuestionComment(t){return C({url:"/post/question/post",method:"post",data:t})},getUserSimpleInfoById(t){return C({url:"/user/show/getUser",method:"get",params:{id:t}})},getUserFollowList(t){return C({url:"/user/follow/list",method:"get",params:{id:t}})},getUserFollowedList(t){return C({url:"/user/followed/list",method:"get",params:{id:t}})},getUserDetailById(t){return C({url:"/user/show/getUserDetail",method:"get",params:{id:t}})},updateUserInfoByUser(t){return C({url:"/user/show/update",method:"post",data:t})},getUserPublishArticleList(t,e){return C({url:"/kkc/article/user/publish",method:"get",params:{id:t,currentPage:e}})},getUserPublishQuestionList(t,e){return C({url:"/kkc/question/user/publish",method:"get",params:{id:t,currentPage:e}})}},w={name:"Index",data(){return{nowDate:new Date,userImg:a("86bb"),carouselList:[a("c1c5"),a("81e5"),a("619a")],article:{recent:[],special:[]},question:{recent:[],special:[]}}},mounted(){this.getIndexArticle(),this.getIndexQuestion()},methods:{getIndexArticle(){y.getIndexArticle().then(t=>{let e=t.data.data;this.article.recent=e.recent,this.article.special=e.special})},getIndexQuestion(){y.getIndexQuestion().then(t=>{let e=t.data.data;this.question.recent=e.recent,this.question.special=e.special})}}},k=w,I=(a("a81f"),Object(n["a"])(k,p,g,!1,null,"7f054c39",null)),x=I.exports,A=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("div",{staticClass:"header_logo"},[e("router-link",{attrs:{to:"/"}},[t._v("AATTS")])],1)])],1)],1),e("div",{staticClass:"main_body"},[e("div",{staticClass:"main"},[e("el-row",[e("el-col",{attrs:{span:16}},[t._v("   ")]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"login_body"},[e("div",{staticClass:"login_tip"},[e("el-row",[e("el-col",{staticStyle:{"border-right":"1px solid rgb(230, 230, 230)"},attrs:{span:12}},[e("router-link",{attrs:{to:"/login"}},[e("span",{staticClass:"active"},[t._v("登录")])])],1),e("el-col",{attrs:{span:12}},[e("router-link",{attrs:{to:"/register"}},[t._v("注册")])],1)],1)],1),e("div",{staticClass:"login_input"},[e("div",{staticClass:"item1"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-user",placeholder:"请输入用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("div",{staticClass:"item1"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-lock",placeholder:"请输入密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("div",{staticClass:"item2"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-repeat",placeholder:"请输入验证码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),e("img",{attrs:{src:t.imgUrl},on:{click:function(e){return t.getVerifyCode()}}})],1)]),e("div",{staticClass:"login_submit"},[e("el-button",{attrs:{plain:""},on:{click:t.login}},[t._v("登录")])],1)])])],1)],1)])])},U=[],S=(a("14d9"),{name:"Login",data(){return{form:{username:"",password:"",code:""},imgUrl:""}},beforeMount(){this.getVerifyCode()},mounted(){let t=this.$route.params.error;console.log(t)},methods:{getVerifyCode(){y.getVerifyCode().then(t=>{this.imgUrl=t.data})},login(){0!==this.form.username.length?0!==this.form.password.length?0!==this.form.code.length?y.login(this.form).then(t=>{if(200===t.data.code){this.$message({message:t.data.data,type:"success"});let e=t.headers.get("accessKey");f.a.set("token",e,{domain:"localhost"}),this.$bus.$emit("loginRefresh"),this.$router.push("/")}else this.$message({message:t.data.message,type:"error"})}):this.$message({message:"验证码不能为空",type:"error"}):this.$message({message:"密码不能为空",type:"error"}):this.$message({message:"用户名不能为空",type:"error"})}}}),q=S,$=(a("1e52"),Object(n["a"])(q,A,U,!1,null,"37950eff",null)),D=$.exports,P=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("div",{staticClass:"header_logo"},[e("router-link",{attrs:{to:"/"}},[t._v("AATTS")])],1)])],1)],1),e("div",{staticClass:"main_body"},[e("div",{staticClass:"main"},[e("el-row",[e("el-col",{attrs:{span:16}},[t._v(" ")]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"login_body"},[e("div",{staticClass:"login_tip"},[e("el-row",[e("el-col",{staticStyle:{"border-right":"1px solid rgb(230, 230, 230)"},attrs:{span:12}},[e("router-link",{attrs:{to:"/login"}},[t._v("登录")])],1),e("el-col",{attrs:{span:12}},[e("router-link",{attrs:{to:"/register"}},[e("span",{staticClass:"active"},[t._v("注册")])])],1)],1)],1),e("div",{staticClass:"login_input"},[e("div",{staticClass:"item1"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-user",placeholder:"请输入要注册的用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),e("div",{staticClass:"item1"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-lock",placeholder:"请输入要注册的密码"},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),e("div",{staticClass:"item1"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-envelope",placeholder:"请输入邮箱"},model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),e("div",{staticClass:"item2"},[e("el-input",{attrs:{"prefix-icon":"fa-solid fa-repeat",placeholder:"请输入邮箱验证码"},model:{value:t.form.code,callback:function(e){t.$set(t.form,"code",e)},expression:"form.code"}}),e("el-button",{attrs:{disabled:t.sendCodeStatus,plain:""},on:{click:function(e){return t.sendCodeClick()}}},[t._v(t._s(t.sendCode))])],1)]),e("div",{staticClass:"login_submit"},[e("el-button",{attrs:{plain:""},on:{click:t.register}},[t._v("注册并登陆")])],1)])])],1)],1)])])},L=[],T={name:"Login",data(){return{form:{username:"",password:"",code:"",email:""},imgUrl:"",sendCode:"发送验证码",sendCodeStatus:!1,second:300}},beforeMount(){this.getVerifyCode()},mounted(){},methods:{getVerifyCode(){y.getVerifyCode().then(t=>{this.imgUrl=t.data})},register(){y.register(this.form).then(t=>{if(200===t.data.code){let e=t.headers.get("accessKey");f.a.set("token",e,{domain:"localhost"}),this.$bus.$emit("loginRefresh"),this.$router.push("/")}else this.$message({message:t.data.message,type:"error"})})},sendCodeClick(){if(0===this.form.email.length)return void this.$message({message:"请先填写邮箱再点击发送...",type:"error"});y.sendCode(this.form.email),this.sendCodeStatus=!0,this.sendCode=this.second+"s";let t=setInterval(()=>{if(this.second<1)return this.sendCode="发送验证码",this.sendCodeStatus=!1,void clearInterval(t);this.second=this.second-1,this.sendCode=this.second+"s"},1e3);this.$message({message:"发送成功",type:"success"})}}},F=T,H=(a("072f"),Object(n["a"])(F,P,L,!1,null,"b5ea8a20",null)),B=H.exports,V=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("div",{staticClass:"article_nav"},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect}},t._l(t.categoryList,(function(a){return e("el-menu-item",{key:a.id,attrs:{index:a.id}},[t._v(t._s(a.label))])})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:1!=t.activeIndex,expression:"activeIndex != 1"}],staticClass:"article_sub_nav"},t._l(t.subTagList,(function(a,s){return e("span",{key:s,staticClass:"sub_tag",on:{click:function(e){return t.subTagClick(a.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[t.$route.query.tagId==a.id?e("span",{staticClass:"active"},[t._v(t._s(a.label))]):e("span",[t._v(t._s(a.label))])])])})),0),e("div",{staticClass:"article_body"},[e("el-row",[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article_condition"},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.form.condition,mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect2}},t._l(t.conditionList,(function(a){return e("el-menu-item",{key:a.index,attrs:{index:a.index}},[t._v(t._s(a.category))])})),1)],1),t._l(t.datas,(function(a){return e("div",{key:a.id,staticClass:"article_main"},[null!=a.firstImg?e("div",{staticClass:"article_main_body"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},[1==a.official?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("官方")]):t._e(),1==a.top?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("置顶")]):t._e(),1==a.essence?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("精华")]):t._e(),t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)}))],2),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(" "+t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("img",{attrs:{src:null==a.authorAvatar?t.userImg:a.authorAvatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):e("div",{staticClass:"article_main_body_noImg"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},[1==a.official?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("官方")]):t._e(),1==a.top?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("置顶")]):t._e(),1==a.essence?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("精华")]):t._e(),t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)}))],2),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(" "+t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("img",{attrs:{src:null==a.authorAvatar?t.userImg:a.authorAvatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]),null!=a.firstImg?e("div",{staticClass:"article_main_img"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("img",{attrs:{src:a.firstImg}})])],1):t._e()])})),e("div",{staticClass:"loading"},[t._v(t._s(t.noMore?"没有更多了":"加载中..."))])],2),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article_aside",style:{height:t.asideHeight+"px"}},[e("div",{staticClass:"article_bulletin_area"},[e("div",{staticClass:"article_bulletin_tip"},[e("span",[t._v("公告")])]),e("div",{staticClass:"article_bulletin_list"},t._l(4,(function(a){return e("div",{key:a,staticClass:"article_bulletin_node"},[e("el-row",[e("el-col",{attrs:{span:16}},[e("span",{staticClass:"title"},[t._v("123123123123123123123123123123")])]),e("el-col",{attrs:{span:8}},[e("span",{staticStyle:{color:"rgb(132, 132, 141)"}},[t._v("2023-01-02")])])],1)],1)})),0)]),e("div",{staticClass:"article_random_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("随便看看")])]),t._l(5,(function(s){return e("div",{key:s,staticClass:"article_random_node"},[e("p",{staticClass:"article_random_title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+s}},[t._v("aaaaaaaaaaaaa111111111111111111111")])],1),e("p",{staticClass:"article_random_other"},[e("span",[e("img",{attrs:{src:a("86bb")}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/123123"}},[t._v("作者123123")])],1),e("span",[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" 1000")])])])}))],2)])])],1)],1)]),e("Footer")],1)},z=[],O=(a("3c65"),{name:"ArticleList",data(){return{activeIndex:"1",categoryList:[],conditionList:[{index:"10000",category:"最新"},{index:"10001",category:"最热"}],subTagList:["aaa"],datas:[],isAchiveBottom:!1,noMore:!1,userImg:a("86bb"),asideHeight:170,relationData:{},form:{categoryId:1,tagId:1,currentPage:1,condition:"10000"}}},created(){window.onscroll=()=>{var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;console.log(t+e>=a-20&&!this.isAchiveBottom&&!this.noMore),t+e>=a-20&&!this.isAchiveBottom&&!this.noMore&&(this.isAchiveBottom=!0,setTimeout(()=>{this.form.currentPage=this.form.currentPage+1,this.getArticleList(),this.isAchiveBottom=!1},500))}},beforeMount(){},mounted(){this.getCategoryTree(),this.getArticleList()},methods:{getArticleList(){if(1==this.form.currentPage)y.getArticleListByCondition(this.form).then(t=>{this.datas=t.data.data,this.asideHeight=this.asideHeight+170*this.datas.length});else{let t=this.datas.length;y.getArticleListByCondition(this.form).then(e=>{this.datas=this.datas.concat(e.data.data),e.data.data.length<10&&(this.noMore=!0),this.asideHeight=this.asideHeight+170*(this.datas.length-t)})}},handleSelect(t){this.activeIndex=t,this.form.categoryId=t,this.form.tagId=1,this.form.currentPage=1,this.form.condition="10000",this.asideHeight=170,this.subTagList=this.relationData[t],this.datas=[],this.$router.push({path:"/article",query:{categoryId:t,tagId:1}}),this.getArticleList()},subTagClick(t){let e=this.$route.query.categoryId;this.form.categoryId=e,this.form.tagId=t,this.asideHeight=170,this.form.currentPage=1,this.$router.push({path:"/article",query:{categoryId:e,tagId:t}}),this.getArticleList()},handleSelect2(t){this.asideHeight=170,this.form.condition=t,this.getArticleList()},getCategoryTree(){y.getCategoryTree().then(t=>{let e=t.data.data;this.categoryList.push({id:"1",label:"全部"});for(let a=0;a<e.length;a++)this.categoryList.push({id:e[a].id+"",label:e[a].label}),this.relationData[e[a].id]=e[a].children,this.relationData[e[a].id].unshift({id:"1",label:"全部"})})}}}),E=O,M=(a("351f"),Object(n["a"])(E,V,z,!1,null,"673c2149",null)),j=M.exports,Q=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("el-row",[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article_body"},[e("p",[t._v(t._s(t.article.title))]),e("div",{staticClass:"info"},[e("img",{attrs:{src:null==t.article.authorAvatar?t.userImg:t.article.authorAvatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+t.article.authorId}},[t._v(t._s(t.article.authorUsername))]),t._v("  ")],1),e("span",[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.article.publishTime.split("T")[0])+"  ")]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.article.views))])]),e("mavon-editor",{staticClass:"md",staticStyle:{"box-shadow":"0px"},attrs:{previewBackground:"#fff",value:t.article.content,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),e("div",{staticClass:"other"},[e("span",[t._v(t._s(t.article.title))]),e("div",{staticStyle:{width:"23%",float:"right","text-align":"right","margin-right":"16px"}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("a",{attrs:{href:"javascript:void(0)"}},[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" "+t._s(t.article.thumbsup))])]),e("span",[e("a",{attrs:{href:"javascript:void(0)"}},[e("i",{staticClass:"el-icon-share"})])])])])],1),e("div",{staticClass:"article_comment_body"},[e("div",{staticClass:"article_comment_submit"},[e("p",{staticStyle:{"text-align":"left","margin-left":"20px","margin-bottom":"13px","font-size":"21px",color:"rgb(132, 132, 141)","font-weight":"bolder"}},[t._v(" 发表评论 ")]),e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",maxlength:"200","show-word-limit":"",resize:"none"},model:{value:t.commentAreaData,callback:function(e){t.commentAreaData=e},expression:"commentAreaData"}}),e("p",{staticStyle:{"text-align":"right","margin-right":"20px","margin-top":"13px","padding-bottom":"15px"}},[e("el-button",{attrs:{plain:""},on:{click:t.commentClick}},[t._v("提交评论")])],1)],1),e("div",{staticClass:"article_comment_area"},[e("p",{staticStyle:{"margin-left":"20px","margin-bottom":"13px","font-size":"21px",color:"rgb(132, 132, 141)","font-weight":"bolder"}},[t._v(" 评论 ")]),null!=t.commentList?t._l(t.commentList,(function(a){return e("div",{key:a.id,staticClass:"article_comment_node"},[e("div",{staticClass:"item1"},[e("img",{attrs:{src:null==a.userInfo.avatar?t.userImg:a.userInfo.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.userInfo.id}},[t._v(t._s(a.userInfo.username))])],1),e("span",[t._v(t._s(a.createTime.replace("T"," ")))]),e("span",{on:{click:function(e){return t.replyClick(a.id,a.userInfo.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[e("i",{staticClass:"fa-regular fa-comments"}),t._v(" 回复")])])]),e("div",{staticClass:"item2"},[e("span",[t._v(t._s(a.commentContent))])]),null!=a.subComment?e("div",{staticClass:"item3"},t._l(a.subComment,(function(a){return e("div",{key:a.key,staticClass:"article_comment_sub_node"},[e("div",{staticClass:"sub_item1"},[e("img",{attrs:{src:null==a.userInfo.avatar?t.userImg:a.userInfo.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.userInfo.id}},[t._v(t._s(a.userInfo.username))])],1),e("span",[t._v("回复")]),e("span",{staticStyle:{color:"black"}},[t._v(t._s(a.replyUsername))]),e("span",[t._v(t._s(a.createTime.replace("T"," ")))]),e("span",{on:{click:function(e){return t.replyClick(a.parentId,a.userInfo.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[e("i",{staticClass:"fa-regular fa-comments"}),t._v(" 回复")])])]),e("div",{staticClass:"sub_item2"},[e("span",[t._v(t._s(a.commentContent))])])])})),0):t._e()])})):e("el-empty",{attrs:{description:"还没有人评论.."}})],2)])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article_aside"},[e("div",{staticClass:"article_author_area"},[e("div",{staticClass:"article_author_avator"},[e("img",{staticStyle:{"margin-top":"30px"},attrs:{src:null==t.article.authorAvatar?t.userImg:t.article.authorAvatar}}),e("p",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("router-link",{attrs:{target:"_blank",to:"/user/123123"}},[t._v(t._s(this.article.authorUsername))])],1),t.follow.followId!=t.follow.userId?e("p",{staticClass:"article_author_follow",staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[t.isFollow?e("span",{on:{click:t.undoAuthorFollow}},[t._v("已关注")]):e("span",{on:{click:t.authorFollow}},[e("i",{staticClass:"el-icon-plus"}),t._v("关注")])]):t._e()]),e("div",{staticClass:"article_author_info"},[e("div",{staticClass:"info_item"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v("原创数 "+t._s(t.user.originalCount))])]),e("el-col",{attrs:{span:12}},[e("span",[t._v("粉丝数 "+t._s(t.user.followedCount))])])],1)],1),e("div",{staticClass:"info_item"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v("点赞数 "+t._s(t.user.thumbsUpCount))])]),e("el-col",{attrs:{span:12}},[e("span",[t._v("收藏数 "+t._s(t.user.collectionCount))])])],1)],1)])]),e("div",{staticClass:"article_random_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("随便看看")])]),t._l(5,(function(s){return e("div",{key:s,staticClass:"article_random_node"},[e("p",{staticClass:"article_random_title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+s}},[t._v("aaaaaaaaaaaaa111111111111111111111")])],1),e("p",{staticClass:"article_random_other"},[e("span",[e("img",{attrs:{src:a("86bb")}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/123123"}},[t._v("作者123123")])],1),e("span",[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" 1000")])])])}))],2)])])],1)],1),[e("el-dialog",{attrs:{title:"评论回复",visible:t.replayDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.replayDialogVisible=e}}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",maxlength:"200","show-word-limit":"",resize:"none"},model:{value:t.replyAreaData,callback:function(e){t.replyAreaData=e},expression:"replyAreaData"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.replayDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.replyCommentClick}},[t._v("确 定")])],1)],1)],e("Footer")],2)},R=[],W={name:"ArticleDetail",data(){return{prop:{subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0},commentAreaData:"",replyAreaData:"",replayDialogVisible:!1,isFollow:!1,userImg:a("86bb"),article:{title:"",content:'# 第一章 JAVA的介绍\n## 1.什么是java\nJava是你妈的\n```java\npublic class HelloWorld{\n    public static void main(String[] args){\n\tSystem.out.println("Hello World,guys");\n    }\n}\n```',authorId:"",authorUsername:"",authorAvatar:"",thumbsup:"",views:"",publishTime:""},user:{originalCount:0,thumbsUpCount:0,followedCount:0,collectionCount:0},commentList:[],postComment:{id:this.$route.params.id,commentId:null,replyId:null,parentId:null,commentContent:""},follow:{followId:null,userId:null}}},mounted(){this.getUserInfo(),this.getArticle()},methods:{getUserInfo(){let t=f.a.get("token");void 0!==t&&y.getUserInfo().then(t=>{let e=t.data.data;this.postComment.commentId=e.id,this.follow.userId=e.id})},checkUserFollow(){let t=f.a.get("token");void 0!==t&&y.checkUserFollow(this.follow).then(t=>{this.isFollow=t.data.data})},getArticleComment(t){y.getArticleComment(t).then(t=>{this.commentList=t.data.data})},getUserAchievementById(t){y.getUserAchievementById(t).then(t=>{let e=t.data.data;this.user.originalCount=e.originalCount,this.user.thumbsUpCount=e.thumbsUpCount,this.user.followedCount=e.followedCount,this.user.collectionCount=e.collectionCount,this.checkUserFollow()})},getArticle(){let t=this.$route.params.id;y.getArticleShowById(t).then(t=>{let e=t.data.data;this.article.content=e.content,this.article.title=e.title,this.article.authorId=e.authorId,this.article.authorUsername=e.authorUsername,this.article.authorAvatar=e.authorAvatar,this.article.thumbsup=e.thumbsup,this.article.views=e.views,this.article.publishTime=e.publishTime,this.follow.followId=e.authorId,this.getUserAchievementById(e.authorId),this.getArticleComment(e.id)})},commentClick(){let t=f.a.get("token");if(void 0===t)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});0!=this.commentAreaData.length?(this.postComment.parentId=null,this.postComment.replyId=null,this.postComment.commentContent=this.commentAreaData,y.postArticleComment(this.postComment).then(t=>{200==t.data.code&&(this.$message({message:"评论成功",type:"warning"}),this.getArticleComment(this.postComment.id))})):this.$message({message:"评论内容不能为空",type:"warning"})},replyClick(t,e){let a=f.a.get("token");if(void 0===a)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});this.replayDialogVisible=!0,this.replyAreaData="",this.postComment.parentId=t,this.postComment.replyId=e},replyCommentClick(){0!=this.replyAreaData.length?(this.postComment.commentContent=this.replyAreaData,y.postArticleComment(this.postComment).then(t=>{200==t.data.code&&(this.$message({message:"评论成功",type:"warning"}),this.getArticleComment(this.postComment.id))}),this.replayDialogVisible=!1):this.$message({message:"回复评论内容不能为空",type:"warning"})},authorFollow(){let t=f.a.get("token");if(void 0===t)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});y.userFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"关注成功",type:"success"}),this.isFollow=!0)})},undoAuthorFollow(){y.userCancelFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"取消关注成功",type:"success"}),this.isFollow=!1)})}}},K=W,J=(a("34c7"),Object(n["a"])(K,Q,R,!1,null,"03459196",null)),N=J.exports,G=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"write-header"},[e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"write-header-return"},[e("span",{on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v("返回上一页")])])]),e("el-col",{attrs:{span:17}},[e("el-input",{attrs:{type:"text",placeholder:"请输入内容文章标题",maxlength:"60","show-word-limit":""},model:{value:t.article.title,callback:function(e){t.$set(t.article,"title",e)},expression:"article.title"}})],1),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"write-header-publish"},[e("span",{on:{click:t.saveEditor}},[t._v("保存文章")]),e("span",{on:{click:t.publicClick}},[t._v("发布文章")])])])],1)],1),e("div",{style:{height:t.editorHeight+"px"}},[e("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{save:t.saveEditor,imgAdd:t.imgAddClick,imgDel:t.imgDelClick},model:{value:t.article.content,callback:function(e){t.$set(t.article,"content",e)},expression:"article.content"}})],1),[e("el-dialog",{attrs:{title:"检测好并确认发布吗",visible:t.dialogVisible,"close-on-click-modal":!1,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",[e("span",[t._v("该文章所属的分类：")]),e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.categoryClick},model:{value:t.article.categoryId,callback:function(e){t.$set(t.article,"categoryId",e)},expression:"article.categoryId"}},t._l(t.options,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),e("div",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[e("span",[t._v("该文章所属的标签：")]),e("el-select",{attrs:{multiple:"",placeholder:"请选择",disabled:t.tagFlag},model:{value:t.article.tagIds,callback:function(e){t.$set(t.article,"tagIds",e)},expression:"article.tagIds"}},t._l(t.tagOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.publishRelease}},[t._v("确 定")])],1)])]],2)},X=[],Y=(a("5b81"),{getPolicy(){return C({url:"/upload/oss/policy",method:"get"})}});const Z=_["a"].create({baseURL:"https://kkc-picture.oss-cn-shenzhen.aliyuncs.com",timeout:5e3});var tt=Z,et={name:"ArticleWrite",data(){return{editorHeight:window.innerHeight-60-1,dialogVisible:!1,options:[],tagOptions:[],article:{authorId:"",categoryId:"",tagIds:[],content:"",title:""},tagFlag:!0,img_file:{},relationData:{}}},mounted(){this.getEditor(),this.getUserInfo(),this.$nextTick(()=>{window.addEventListener("resize",()=>{this.editorHeight=window.innerHeight-60-1})})},methods:{getUserInfo(){y.getUserInfo().then(t=>{let e=t.data.data;this.article.authorId=e.id})},publishRelease(){0===this.article.categoryId.length?alert("必须选择一个分类"):0===this.article.tagIds.length?alert("请选择至少一个标签"):(Y.getPolicy().then(t=>{let e=t.data.data;for(let s in this.img_file){var a=new FormData;let t=e.dir+this.title.slice(0,15)+"/"+this.img_file[s].name.replaceAll(" ","");a.append("key",t),a.append("policy",e.policy),a.append("OSSAccessKeyId",e.accessid),a.append("signature",e.signature),a.append("host",e.host),a.append("file",this.img_file[s]),tt({method:"post",data:a}),this.$refs.md.$img2Url(s,e.host+"/"+t)}}),y.writeArticle(this.article).then(t=>{200==t.data.code&&(this.clearEditor(),this.dialogVisible=!1,this.$router.push({path:"/"}),this.$message({message:t.data.data,type:"success"}))}))},publicClick(){this.dialogVisible=!0,y.getCategoryTree().then(t=>{let e=t.data.data;for(let a=0;a<e.length;a++)this.options.push({id:e[a].id,label:e[a].label}),this.relationData[e[a].id]=e[a].children})},saveEditor(){0!==this.title.length?(localStorage.setItem("write-article-content",this.content),localStorage.setItem("write-acticle-title",this.title),this.$notify({title:"保存成功",message:"",type:"success",duration:2e3,offset:50}),this.imgwholeUpload()):this.$message({message:"请先填写一下标题之后在保存",type:"warning"})},getEditor(){let t=localStorage.getItem("write-article-content"),e=localStorage.getItem("write-acticle-title");null!==t&&(this.content=t),null!==e&&(this.title=e)},clearEditor(){localStorage.removeItem("write-article-content"),localStorage.removeItem("write-acticle-title")},categoryClick(t){this.article.tagIds=[],this.tagFlag=!1,this.tagOptions=this.relationData[t]},imgAddClick(t,e){this.img_file[t]=e},imgDelClick(t){delete this.img_file[t]},imgwholeUpload(){Y.getPolicy().then(t=>{let e=t.data.data;for(let s in this.img_file){var a=new FormData;let t=e.dir+this.title.slice(0,15)+"/"+this.img_file[s].name.replaceAll(" ","");a.append("key",t),a.append("policy",e.policy),a.append("OSSAccessKeyId",e.accessid),a.append("signature",e.signature),a.append("host",e.host),a.append("file",this.img_file[s]),tt({method:"post",data:a}),this.$refs.md.$img2Url(s,e.host+"/"+t)}})}}},at=et,st=(a("be87"),Object(n["a"])(at,G,X,!1,null,"12672553",null)),it=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("div",{staticClass:"article_nav"},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect}},t._l(t.categoryList,(function(a){return e("el-menu-item",{key:a.id,attrs:{index:a.id}},[t._v(t._s(a.label))])})),1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:1!=t.activeIndex,expression:"activeIndex != 1"}],staticClass:"article_sub_nav"},t._l(t.subTagList,(function(a){return e("span",{key:a.id,staticClass:"sub_tag",on:{click:function(e){return t.subTagClick(a.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[t.$route.query.tagId==a.id?e("span",{staticClass:"active"},[t._v(t._s(a.label))]):e("span",[t._v(t._s(a.label))])])])})),0),e("div",{staticClass:"article_body"},[e("el-row",[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article_condition"},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"10000",mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect2}},t._l(t.conditionList,(function(a){return e("el-menu-item",{key:a.index,attrs:{index:a.index}},[t._v(t._s(a.category))])})),1)],1),t._l(t.datas,(function(a){return e("div",{key:a.id,staticClass:"article_main"},[e("div",{staticClass:"article_main_body"},[e("p",{staticClass:"article_main_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article_main_tags"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("div",{staticClass:"article_main_other"},[e("span",[t._v("回答"+t._s(a.commentCount)+" ")]),e("span",[t._v("· ")]),e("span",[t._v("观看"+t._s(a.views))]),e("div",{staticClass:"other_right"},[e("span",[e("router-link",{staticStyle:{color:"rgb(132, 132, 141)"},attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])],1),e("span",[t._v("· ")]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))])])])])])})),e("div",{staticClass:"loading"},[t._v(t._s(t.noMore?"没有更多了":"加载中..."))])],2),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article_aside",style:{height:t.asideHeight+"px"}},[e("div",{staticClass:"article_bulletin_area"},[e("div",{staticClass:"article_bulletin_tip"},[e("span",[t._v("公告")])]),e("div",{staticClass:"article_bulletin_list"},t._l(4,(function(a){return e("div",{key:a,staticClass:"article_bulletin_node"},[e("el-row",[e("el-col",{attrs:{span:16}},[e("span",{staticClass:"title"},[t._v("123123123123123123123123123123")])]),e("el-col",{attrs:{span:8}},[e("span",{staticStyle:{color:"rgb(132, 132, 141)"}},[t._v("2023-01-02")])])],1)],1)})),0)]),e("div",{staticClass:"article_random_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("随便看看")])]),t._l(5,(function(s){return e("div",{key:s,staticClass:"article_random_node"},[e("p",{staticClass:"article_random_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+s}},[t._v("aaaaaaaaaaaaa111111111111111111111")])],1),e("p",{staticClass:"article_random_other"},[e("span",[e("img",{attrs:{src:a("86bb")}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/123123"}},[t._v("作者123123")])],1),e("span",[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" 1000")])])])}))],2)])])],1)],1)]),e("Footer")],1)},ot=[],lt={name:"QuestionList",data(){return{activeIndex:"1",categoryList:[],conditionList:[{index:"10000",category:"最新"},{index:"10001",category:"最热"},{index:"10002",category:"最多回答"}],subTagList:[],datas:[],isAchiveBottom:!1,noMore:!1,userImg:a("86bb"),asideHeight:170,relationData:{},form:{categoryId:1,tagId:1,currentPage:1,condition:"10000"}}},created(){window.onscroll=()=>{var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=a-20&&!this.isAchiveBottom&&!this.noMore&&(this.isAchiveBottom=!0,setTimeout(()=>{this.form.currentPage+=1,this.getQuestionList(),this.isAchiveBottom=!1},500))}},mounted(){this.getCategoryTree(),this.getQuestionList()},methods:{getQuestionList(){if(1==this.form.currentPage)y.getQuestionListByCondition(this.form).then(t=>{this.datas=t.data.data,this.asideHeight=this.asideHeight+110*this.datas.length});else{let t=this.datas.length;y.getQuestionListByCondition(this.form).then(e=>{this.datas=this.datas.concat(e.data.data),e.data.data.length<10&&(this.noMore=!0),this.asideHeight=this.asideHeight+110*(this.datas.length-t)})}},handleSelect(t){this.activeIndex=t,this.form.categoryId=t,this.form.tagId=1,this.form.currentPage=1,this.form.condition="10000",this.asideHeight=170,this.subTagList=this.relationData[t],this.datas=[],this.$router.push({path:"/question",query:{categoryId:t,tagId:1}}),this.getQuestionList()},subTagClick(t){let e=this.$route.query.categoryId;this.form.categoryId=e,this.form.tagId=t,this.asideHeight=170,this.form.currentPage=1,this.$router.push({path:"/question",query:{categoryId:e,tagId:t}}),this.getQuestionList()},handleSelect2(t){this.asideHeight=170,this.form.condition=t,this.form.currentPage=1,this.noMore=!1,this.getQuestionList()},getCategoryTree(){y.getCategoryTree().then(t=>{let e=t.data.data;this.categoryList.push({id:"1",label:"全部"});for(let a=0;a<e.length;a++)this.categoryList.push({id:e[a].id+"",label:e[a].label}),this.relationData[e[a].id]=e[a].children,this.relationData[e[a].id].unshift({id:"1",label:"全部"})})}}},nt=lt,ct=(a("7529"),Object(n["a"])(nt,rt,ot,!1,null,"6a7f57bc",null)),dt=ct.exports,ut=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("el-row",[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article_body"},[e("p",[t._v(t._s(t.question.title))]),e("div",{staticClass:"info"},[e("img",{attrs:{src:null==t.question.avatar?t.userImg:t.question.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+t.question.authorId}},[t._v(t._s(t.question.authorUsername))]),t._v("  ")],1),e("span",[e("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t.question.publishTime.split("T")[0])+"  ")]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v(" "+t._s(t.question.views))])]),e("mavon-editor",{staticClass:"md",staticStyle:{"box-shadow":"0px"},attrs:{previewBackground:"#fff",value:t.question.content,subfield:t.prop.subfield,defaultOpen:t.prop.defaultOpen,toolbarsFlag:t.prop.toolbarsFlag,editable:t.prop.editable,scrollStyle:t.prop.scrollStyle}}),e("div",{staticClass:"other"},[e("span",[t._v(t._s(t.question.title))]),e("div",{staticStyle:{width:"23%",float:"right","text-align":"right","margin-right":"16px"}},[e("span",{attrs:{slot:"reference"},slot:"reference"},[e("a",{attrs:{href:"javascript:void(0)"}},[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" "+t._s(t.question.thumbsup))])]),e("span",[e("a",{attrs:{href:"javascript:void(0)"}},[e("i",{staticClass:"el-icon-share"})])])])])],1),e("div",{staticClass:"article_comment_body"},[e("div",{staticClass:"article_comment_submit"},[e("p",{staticStyle:{"text-align":"left","margin-left":"20px","margin-bottom":"13px","font-size":"21px",color:"rgb(132, 132, 141)","font-weight":"bolder"}},[t._v(" 发表评论 ")]),e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",maxlength:"200","show-word-limit":"",resize:"none"},model:{value:t.commentAreaData,callback:function(e){t.commentAreaData=e},expression:"commentAreaData"}}),e("p",{staticStyle:{"text-align":"right","margin-right":"20px","margin-top":"13px","padding-bottom":"15px"}},[e("el-button",{attrs:{plain:""},on:{click:t.commentClick}},[t._v("提交评论")])],1)],1),e("div",{staticClass:"article_comment_area"},[e("p",{staticStyle:{"margin-left":"20px","margin-bottom":"13px","font-size":"21px",color:"rgb(132, 132, 141)","font-weight":"bolder"}},[t._v(" 评论 ")]),null!=t.commentList?t._l(t.commentList,(function(a){return e("div",{key:a.id,staticClass:"article_comment_node"},[e("div",{staticClass:"item1"},[e("img",{attrs:{src:null==a.userInfo.avatar?t.userImg:a.userInfo.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.userInfo.id}},[t._v(t._s(a.userInfo.username))])],1),e("span",[t._v(t._s(a.createTime.replace("T"," ")))]),e("span",{on:{click:function(e){return t.replyClick(a.id,a.userInfo.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[e("i",{staticClass:"fa-regular fa-comments"}),t._v(" 回复")])])]),e("div",{staticClass:"item2"},[e("span",[t._v(t._s(a.commentContent))])]),null!=a.subComment?e("div",{staticClass:"item3"},t._l(a.subComment,(function(a){return e("div",{key:a.key,staticClass:"article_comment_sub_node"},[e("div",{staticClass:"sub_item1"},[e("img",{attrs:{src:null==a.userInfo.avatar?t.userImg:a.userInfo.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.userInfo.id}},[t._v(t._s(a.userInfo.username))])],1),e("span",[t._v("回复")]),e("span",{staticStyle:{color:"black"}},[t._v(t._s(a.replyUsername))]),e("span",[t._v(t._s(a.createTime.replace("T"," ")))]),e("span",{on:{click:function(e){return t.replyClick(a.parentId,a.userInfo.id)}}},[e("a",{attrs:{href:"javascript:void(0);"}},[e("i",{staticClass:"fa-regular fa-comments"}),t._v(" 回复")])])]),e("div",{staticClass:"sub_item2"},[e("span",[t._v(t._s(a.commentContent))])])])})),0):t._e()])})):e("el-empty",{attrs:{description:"还没有人评论.."}})],2)])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article_aside"},[e("div",{staticClass:"article_author_area"},[e("div",{staticClass:"article_author_avator"},[e("img",{attrs:{src:null==t.question.avatar?t.userImg:t.question.avatar}}),e("p",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"}},[e("router-link",{attrs:{target:"_blank",to:"/user/321"}},[t._v(t._s(t.question.authorUsername))])],1),t.follow.followId!=t.follow.userId?e("p",{staticClass:"article_author_follow",staticStyle:{"margin-top":"5px","margin-bottom":"10px"}},[t.isFollow?e("span",{on:{click:t.undoAuthorFollow}},[t._v("已关注")]):e("span",{on:{click:t.authorFollow}},[e("i",{staticClass:"el-icon-plus"}),t._v("关注")])]):t._e()]),e("div",{staticClass:"article_author_info"},[e("div",{staticClass:"info_item"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v("原创数 "+t._s(t.user.originalCount))])]),e("el-col",{attrs:{span:12}},[e("span",[t._v("粉丝数 "+t._s(t.user.followedCount))])])],1)],1),e("div",{staticClass:"info_item"},[e("el-row",[e("el-col",{attrs:{span:12}},[e("span",[t._v("点赞数 "+t._s(t.user.thumbsUpCount))])]),e("el-col",{attrs:{span:12}},[e("span",[t._v("收藏数 "+t._s(t.user.collectionCount))])])],1)],1)])]),e("div",{staticClass:"article_random_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("随便看看")])]),t._l(5,(function(s){return e("div",{key:s,staticClass:"article_random_node"},[e("p",{staticClass:"article_random_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/12314"}},[t._v("aaaaaaaaaaaaa111111111111111111111")])],1),e("p",{staticClass:"article_random_other"},[e("span",[e("img",{attrs:{src:a("86bb")}}),t._v(" "),e("router-link",{attrs:{target:"_blank",to:"/user/12314"}},[t._v("作者")])],1),e("span",[e("i",{staticClass:"fa-regular fa-thumbs-up"}),t._v(" 1000")])])])}))],2)])])],1)],1),[e("el-dialog",{attrs:{title:"评论回复",visible:t.replyDialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.replyDialogVisible=e}}},[e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",maxlength:"200","show-word-limit":"",resize:"none"},model:{value:t.replyAreaData,callback:function(e){t.replyAreaData=e},expression:"replyAreaData"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.replyDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.replyCommentClick}},[t._v("确 定")])],1)],1)],e("Footer")],2)},ht=[],mt={name:"QuestionDetail",data(){return{prop:{subfield:!1,defaultOpen:"preview",editable:!1,toolbarsFlag:!1,scrollStyle:!0},value:'# 第一章 JAVA的介绍\n## 1.什么是java\nJava是你妈的\n```java\npublic class HelloWorld{\n    public static void main(String[] args){\n\tSystem.out.println("Hello World,guys");\n    }\n}\n```',commentAreaData:"",replyAreaData:"",replyDialogVisible:!1,isFollow:!1,userImg:a("86bb"),commentList:[],question:{title:"",content:'# 第一章 JAVA的介绍\n## 1.什么是java\nJava是你妈的\n```java\npublic class HelloWorld{\n    public static void main(String[] args){\n\tSystem.out.println("Hello World,guys");\n    }\n}\n```',authorId:"",authorUsername:"",authorAvatar:"",thumbsup:"",views:"",publishTime:""},follow:{followId:null,userId:null},user:{originalCount:0,thumbsUpCount:0,followedCount:0,collectionCount:0},postComment:{id:this.$route.params.id,commentId:null,replyId:null,parentId:null,commentContent:""}}},mounted(){this.getQuestion(),this.getUserInfo()},methods:{getUserInfo(){let t=f.a.get("token");void 0!==t&&y.getUserInfo().then(t=>{let e=t.data.data;this.postComment.commentId=e.id,this.follow.userId=e.id})},checkUserFollow(){let t=f.a.get("token");void 0!==t&&y.checkUserFollow(this.follow).then(t=>{this.isFollow=t.data.data})},getQuestionComment(t){y.getQuestionComment(t).then(t=>{this.commentList=t.data.data})},getUserAchievementById(t){y.getUserAchievementById(t).then(t=>{let e=t.data.data;this.user.originalCount=e.originalCount,this.user.thumbsUpCount=e.thumbsUpCount,this.user.followedCount=e.followedCount,this.user.collectionCount=e.collectionCount,this.checkUserFollow()})},getQuestion(){let t=this.$route.params.id;y.getQuestionShowById(t).then(t=>{let e=t.data.data;this.question.content=e.content,this.question.title=e.title,this.question.authorId=e.authorId,this.question.authorUsername=e.authorUsername,this.question.authorAvatar=e.authorAvatar,this.question.thumbsup=e.thumbsup,this.question.views=e.views,this.question.publishTime=e.publishTime,this.follow.followId=e.authorId,this.getUserAchievementById(e.authorId),this.getQuestionComment(e.id)})},commentClick(){let t=f.a.get("token");if(void 0===t)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});0!=this.commentAreaData.length?(this.postComment.parentId=null,this.postComment.replyId=null,this.postComment.commentContent=this.commentAreaData,y.postQuestionComment(this.postComment).then(t=>{200==t.data.code&&(this.$message({message:"评论成功",type:"warning"}),this.getQuestionComment(this.postComment.id))})):this.$message({message:"评论内容不能为空",type:"warning"})},replyClick(t,e){let a=f.a.get("token");if(void 0===a)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});this.replyDialogVisible=!0,this.replyAreaData="",this.postComment.parentId=t,this.postComment.replyId=e},replyCommentClick(){0!=this.replyAreaData.length?(this.postComment.commentContent=this.replyAreaData,y.postQuestionComment(this.postComment).then(t=>{200==t.data.code&&(this.$message({message:"评论成功",type:"warning"}),this.getQuestionComment(this.postComment.id))}),this.replyDialogVisible=!1):this.$message({message:"回复评论内容不能为空",type:"warning"})},authorFollow(){let t=f.a.get("token");if(void 0===t)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});y.userFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"关注成功",type:"success"}),this.isFollow=!0)})},undoAuthorFollow(){y.userCancelFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"取消关注成功",type:"success"}),this.isFollow=!1)})}}},pt=mt,gt=(a("3226"),Object(n["a"])(pt,ut,ht,!1,null,"9c66d420",null)),_t=gt.exports,vt=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"write-header"},[e("el-row",[e("el-col",{attrs:{span:3}},[e("div",{staticClass:"write-header-return"},[e("span",{on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"el-icon-arrow-left"}),t._v("返回上一页")])])]),e("el-col",{attrs:{span:17}},[e("el-input",{attrs:{type:"text",placeholder:"请输入问答标题",maxlength:"60","show-word-limit":""},model:{value:t.question.title,callback:function(e){t.$set(t.question,"title",e)},expression:"question.title"}})],1),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"write-header-publish"},[e("span",{on:{click:t.saveEditor}},[t._v("保存问答")]),e("span",{on:{click:t.publicClick}},[t._v("发布问答")])])])],1)],1),e("div",{style:{height:t.editorHeight+"px"}},[e("mavon-editor",{ref:"md",staticStyle:{height:"100%"},on:{save:t.saveEditor,imgAdd:t.imgAddClick,imgDel:t.imgDelClick},model:{value:t.question.content,callback:function(e){t.$set(t.question,"content",e)},expression:"question.content"}})],1),[e("el-dialog",{attrs:{title:"检测好并确认发布吗",visible:t.dialogVisible,"close-on-click-modal":!1,width:"30%",center:""},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("div",[e("span",[t._v("该文章所属的分类：")]),e("el-select",{attrs:{placeholder:"请选择"},on:{change:t.categoryClick},model:{value:t.question.categoryId,callback:function(e){t.$set(t.question,"categoryId",e)},expression:"question.categoryId"}},t._l(t.options,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),e("div",{staticStyle:{"margin-top":"15px","margin-bottom":"15px"}},[e("span",[t._v("该文章所属的标签：")]),e("el-select",{attrs:{multiple:"",placeholder:"请选择",disabled:t.tagFlag},model:{value:t.question.tagIds,callback:function(e){t.$set(t.question,"tagIds",e)},expression:"question.tagIds"}},t._l(t.tagOptions,(function(t){return e("el-option",{key:t.id,attrs:{label:t.label,value:t.id}})})),1)],1),e("div",{staticStyle:{"text-align":"center"}},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.publishRelease}},[t._v("确 定")])],1)])]],2)},ft=[],bt={name:"ArticleWrite",data(){return{editorHeight:window.innerHeight-60-1,dialogVisible:!1,options:[],tagOptions:[],question:{authorId:"",categoryId:"",tagIds:[],content:"",title:""},tagFlag:!0,img_file:{},relationData:{}}},mounted(){this.getEditor(),this.getUserInfo(),this.$nextTick(()=>{window.addEventListener("resize",()=>{this.editorHeight=window.innerHeight-60-1})})},methods:{getUserInfo(){y.getUserInfo().then(t=>{let e=t.data.data;this.question.authorId=e.id})},publishRelease(){0===this.question.categoryId.length?alert("必须选择一个分类"):0===this.question.tagIds.length?alert("请选择至少一个标签"):(Y.getPolicy().then(t=>{let e=t.data.data;for(let s in this.img_file){var a=new FormData;let t=e.dir+this.title.slice(0,15)+"/"+this.img_file[s].name.replaceAll(" ","");a.append("key",t),a.append("policy",e.policy),a.append("OSSAccessKeyId",e.accessid),a.append("signature",e.signature),a.append("host",e.host),a.append("file",this.img_file[s]),tt({method:"post",data:a}),this.$refs.md.$img2Url(s,e.host+"/"+t)}}),y.writeQuestion(this.question).then(t=>{200==t.data.code&&(this.clearEditor(),this.dialogVisible=!1,this.$router.push({path:"/"}),this.$message({message:t.data.data,type:"success"}))}))},publicClick(){this.dialogVisible=!0,y.getCategoryTree().then(t=>{let e=t.data.data;for(let a=0;a<e.length;a++)this.options.push({id:e[a].id,label:e[a].label}),this.relationData[e[a].id]=e[a].children})},saveEditor(){0!==this.question.title.length?(localStorage.setItem("write-question-content",this.question.content),localStorage.setItem("write-question-title",this.question.title),this.$notify({title:"保存成功",message:"",type:"success",duration:2e3,offset:50}),this.imgwholeUpload()):this.$message({message:"请先填写一下标题之后在保存",type:"warning"})},getEditor(){let t=localStorage.getItem("write-question-content"),e=localStorage.getItem("write-question-title");null!==t&&(this.question.content=t),null!==e&&(this.question.title=e)},clearEditor(){localStorage.removeItem("write-question-content"),localStorage.removeItem("write-question-title")},categoryClick(t){this.question.tagIds=[],this.tagFlag=!1,this.tagOptions=this.relationData[t]},imgAddClick(t,e){this.img_file[t]=e},imgDelClick(t){delete this.img_file[t]},imgwholeUpload(){Y.getPolicy().then(t=>{let e=t.data.data;for(let s in this.img_file){var a=new FormData;let t=e.dir+this.title.slice(0,15)+"/"+this.img_file[s].name.replaceAll(" ","");a.append("key",t),a.append("policy",e.policy),a.append("OSSAccessKeyId",e.accessid),a.append("signature",e.signature),a.append("host",e.host),a.append("file",this.img_file[s]),tt({method:"post",data:a}),this.$refs.md.$img2Url(s,e.host+"/"+t)}})}}},Ct=bt,yt=(a("229b"),Object(n["a"])(Ct,vt,ft,!1,null,"77938773",null)),wt=yt.exports,kt=function(){var t=this,e=t._self._c;return e("div",[e("Header",{on:{refreshSearchList:t.refreshSearchList}}),e("div",{staticClass:"main"},[e("div",{staticClass:"search_key_show"},[t._v(" 搜索的关键字："),e("span",{staticStyle:{color:"rgb(62, 175, 124)"}},[t._v(t._s(t.$route.params.key))])]),t._l(t.datas,(function(a){return e("div",{key:a.id,staticClass:"article_main"},["article"===a.mark&&null!=a.firstImg?e("div",{staticClass:"article_main_body"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("a",{attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):t._e(),"article"===a.mark&&null!=a.firstImg?e("div",{staticClass:"article_main_img"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("img",{attrs:{src:a.firstImg}})])],1):t._e(),"article"===a.mark&&null==a.firstImg?e("div",{staticClass:"article_main_body_noImg"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("a",{attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):t._e(),"question"===a.mark?e("div",{staticClass:"question_main_body"},[e("p",{staticClass:"question_main_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"question_main_tags"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("div",{staticClass:"question_main_other"},[e("span",[t._v("回答"+t._s(a.commentCount)+" ")]),e("span",[t._v("· ")]),e("span",[t._v("观看"+t._s(a.views))]),e("div",{staticClass:"other_right"},[e("span",[e("a",{staticStyle:{color:"rgb(132, 132, 141)"},attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])]),e("span",[t._v("· ")]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))])])])]):t._e()])})),e("div",{staticClass:"loading"},[t._v(t._s(t.noMore?"没有更多了":"加载中..."))])],2)],1)},It=[],xt={searchKey(t,e){return C({url:"/kkc/search",method:"get",params:{currentPage:e,key:t}})},searchTag(t,e){return C({url:"/kkc/tag/search",method:"get",params:{currentPage:e,id:t}})}},At={name:"KeySearch",data(){return{datas:[],count:5,isAchiveBottom:!1,noMore:!1,searchParams:{key:"",currentPage:1},userImg:a("86bb")}},created(){window.onscroll=()=>{var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=a-20&&!this.isAchiveBottom&&!this.noMore&&(this.isAchiveBottom=!0,setTimeout(()=>{this.searchParams.currentPage+=1,this.getSearchData(),this.isAchiveBottom=!1},500))}},beforeMount(){},mounted(){this.getSearchData()},methods:{articleClick(t){this.$router.push({path:"/article/"+t})},getSearchData(){xt.searchKey(this.$route.params.key,this.searchParams.currentPage).then(t=>{void 0===t.data.data?this.noMore=!0:(void 0!==t.data.data.article&&(t.data.data.article.forEach(t=>{t["mark"]="article"}),this.datas=this.datas.concat(t.data.data.article)),void 0!==t.data.data.question&&(t.data.data.question.forEach(t=>{t["mark"]="question"}),this.datas=this.datas.concat(t.data.data.question)))})},refreshSearchList(){this.datas=[],this.searchParams.currentPage=1,this.getSearchData()}}},Ut=At,St=(a("8776"),Object(n["a"])(Ut,kt,It,!1,null,"80cbcf4a",null)),qt=St.exports,$t=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("div",{staticClass:"search_key_show"},[t._v(" 搜索的关键字："),e("span",{staticStyle:{color:"rgb(62, 175, 124)"}},[t._v(t._s(t.$route.params.id))])]),t._l(t.datas,(function(a){return e("div",{key:a.id,staticClass:"article_main"},["article"===a.mark&&null!=a.firstImg?e("div",{staticClass:"article_main_body"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("a",{attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):t._e(),"article"===a.mark&&null!=a.firstImg?e("div",{staticClass:"article_main_img"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("img",{attrs:{src:a.firstImg}})])],1):t._e(),"article"===a.mark&&null==a.firstImg?e("div",{staticClass:"article_main_body_noImg"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("a",{attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):t._e(),"question"===a.mark?e("div",{staticClass:"question_main_body"},[e("p",{staticClass:"question_main_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"question_main_tags"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("div",{staticClass:"question_main_other"},[e("span",[t._v("回答"+t._s(a.commentCount)+" ")]),e("span",[t._v("· ")]),e("span",[t._v("观看"+t._s(a.views))]),e("div",{staticClass:"other_right"},[e("span",[e("a",{staticStyle:{color:"rgb(132, 132, 141)"},attrs:{href:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))])]),e("span",[t._v("· ")]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))])])])]):t._e()])})),e("div",{staticClass:"loading"},[t._v(t._s(t.noMore?"没有更多了":"加载中..."))])],2)],1)},Dt=[],Pt={name:"TagSearch",data(){return{datas:[],count:5,isAchiveBottom:!1,noMore:!1,searchParams:{id:"",currentPage:1},userImg:a("86bb")}},created(){window.onscroll=()=>{var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=a-20&&!this.isAchiveBottom&&!this.noMore&&(this.isAchiveBottom=!0,setTimeout(()=>{this.searchParams.currentPage+=1,this.getSearchData(),this.isAchiveBottom=!1},500))}},beforeMount(){this.searchParams.id=this.$route.query.id,this.getSearchData()},mounted(){},methods:{articleClick(t){this.$router.push({path:"/article/"+t})},getSearchData(){xt.searchTag(this.searchParams.id,this.searchParams.currentPage).then(t=>{void 0===t.data.data?this.noMore=!0:(void 0!==t.data.data.article&&(t.data.data.article.forEach(t=>{t["mark"]="article"}),this.datas=this.datas.concat(t.data.data.article)),void 0!==t.data.data.question&&(t.data.data.question.forEach(t=>{t["mark"]="question"}),this.datas=this.datas.concat(t.data.data.question)))})}}},Lt=Pt,Tt=(a("dbea"),Object(n["a"])(Lt,$t,Dt,!1,null,"1f26ab9a",null)),Ft=Tt.exports,Ht=function(){var t=this,e=t._self._c;return e("div",[e("Header"),e("div",{staticClass:"main"},[e("div",{staticClass:"user_info"},[e("el-row",[e("el-col",{attrs:{span:4}},[e("div",{staticClass:"user_img"},[e("img",{attrs:{src:null==t.userInfo.avatar?t.userImg:t.userInfo.avatar}})]),t.loginId!=t.$route.params.id?e("p",{staticClass:"author_follow",staticStyle:{"margin-top":"5px"}},[t.isFollow?e("span",{on:{click:t.undoAuthorFollow}},[t._v("已关注")]):e("span",{on:{click:t.authorFollow}},[e("i",{staticClass:"el-icon-plus"}),t._v("关注")])]):t._e()]),e("el-col",{attrs:{span:15}},[e("div",{staticClass:"user_title"},[e("span",[t._v(t._s(t.userInfo.username))])]),e("div",{staticClass:"user_brief"},[e("span",[e("b",[t._v("关注：")]),t._v(t._s(t.userInfo.followedCount))]),e("span",[e("b",[t._v("粉丝：")]),t._v(t._s(t.userInfo.followerCount))]),e("span",[e("b",[t._v("加入时间：")]),t._v(t._s(t.userInfo.createTime.split("T")[0]))]),e("br"),e("div",{staticClass:"user_brief_content"},[e("span",[e("b",[t._v("个人简介：")])]),e("span",[t._v(" "+t._s(t.userInfo.summary)+" ")])])])]),e("el-col",{attrs:{span:5}},[e("div",{staticClass:"user_achievement"},[e("div",{staticClass:"user_achievement_title"},[e("span",{staticStyle:{display:"inline-block","line-height":"50px"}},[t._v("其他统计")])]),e("div",{staticClass:"user_achievement_info"},[e("div",{staticClass:"user_achievement_info_count"},[e("div",{staticClass:"user_achievement_info_item"},[e("div",{staticClass:"user_achievement_info_item_label"},[t._v("点赞")]),e("div",{staticClass:"user_achievement_info_item_number"},[e("span",{staticClass:"number_style"},[t._v(t._s(t.userOther.thumbsUpCount))])])]),e("div",{staticClass:"user_achievement_info_item"},[e("div",{staticClass:"user_achievement_info_item_label"},[t._v("浏览")]),e("div",{staticClass:"user_achievement_info_item_number"},[e("span",{staticClass:"number_style"},[t._v(t._s(t.userOther.viewsCount))])])]),e("div",{staticClass:"user_achievement_info_item"},[e("div",{staticClass:"user_achievement_info_item_label"},[t._v("原创")]),e("div",{staticClass:"user_achievement_info_item_number"},[e("span",{staticClass:"number_style"},[t._v(t._s(t.userOther.originalCount))])])])])])])])],1)],1),e("div",{staticClass:"original_body"},[e("el-col",{attrs:{span:18}},[e("div",{staticClass:"article_condition"},[this.$route.params.id==t.loginId?e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.conditionIndex,mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect2}},t._l(t.conditionList,(function(a){return e("el-menu-item",{key:a.index,attrs:{index:a.index}},[t._v(t._s(a.category))])})),1):e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.conditionIndex,mode:"horizontal","active-text-color":"#3EAF7C"},on:{select:t.handleSelect2}},t._l(t.otherConditionList,(function(a){return e("el-menu-item",{key:a.index,attrs:{index:a.index}},[t._v(t._s(a.category))])})),1)],1),t._l(t.articleList,(function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:"10000"===t.conditionIndex,expression:"conditionIndex === '10000'"}],key:a.id,staticClass:"article_main"},[null!=a.firstImg?e("div",{staticClass:"article_main_body"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},[1==a.official?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("官方")]):t._e(),1==a.top?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("置顶")]):t._e(),1==a.essence?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("精华")]):t._e(),t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)}))],2),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(" "+t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername)+"  ")])],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]):e("div",{staticClass:"article_main_body_noImg"},[e("p",{staticClass:"article-title"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"article-tag"},[1==a.official?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("官方")]):t._e(),1==a.top?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("置顶")]):t._e(),1==a.essence?e("el-tag",{staticStyle:{color:"rgb(62, 175, 124)"},attrs:{size:"small",color:"white"}},[t._v("精华")]):t._e(),t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)}))],2),e("p",{staticClass:"article-describe"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[t._v(" "+t._s(a.content))])],1),e("p",{staticClass:"article-other"},[e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.authorId}},[t._v(t._s(a.authorUsername))]),t._v("  ")],1),e("span",[t._v(t._s(a.publishTime.split("T")[0]))]),e("span",[e("i",{staticClass:"el-icon-view"}),t._v("  "+t._s(a.views))])])]),null!=a.firstImg?e("div",{staticClass:"article_main_img"},[e("router-link",{attrs:{target:"_blank",to:"/article/"+a.id}},[e("img",{attrs:{src:a.firstImg}})])],1):t._e()])})),t._l(t.questionList,(function(a){return e("div",{directives:[{name:"show",rawName:"v-show",value:"10001"===t.conditionIndex,expression:"conditionIndex === '10001'"}],key:a.id,staticClass:"question_main"},[e("div",{staticClass:"question_main_body"},[e("p",{staticClass:"question_main_title"},[e("router-link",{attrs:{target:"_blank",to:"/question/"+a.id}},[t._v(t._s(a.title))])],1),e("p",{staticClass:"question_main_tags"},t._l(a.tagList,(function(a){return e("el-tag",{key:a.id,attrs:{type:"info",size:"mini"}},[e("router-link",{attrs:{target:"_blank",to:"/tag/"+a.id}},[t._v(t._s(a.label))])],1)})),1),e("div",{staticClass:"question_main_other"},[e("span",[t._v("回答"+t._s(a.commentCount)+" ")]),e("span",[t._v("· ")]),e("span",[t._v("观看"+t._s(a.views))]),e("div",{staticClass:"other_right"},[e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.id}},[t._v(t._s(a.authorUsername))])],1),e("span",[t._v("· ")]),e("span",[t._v(t._s(a.publishTime.split("T")[0]))])])])])])})),e("div",{directives:[{name:"show",rawName:"v-show",value:"10002"===t.conditionIndex,expression:"conditionIndex === '10002'"}],staticClass:"message_main"},[e("div",{staticClass:"message_main_thumbsUp"},[e("div",{staticClass:"thumbsUp_avatar"},[e("img",{attrs:{src:a("86bb")}})]),e("div",{staticClass:"thumbsUp_show"},[e("span",[e("router-link",{attrs:{to:"/user/1d3a"}},[e("b",[t._v("作者")])]),t._v(" · 赞了这篇文章")],1)]),e("div",{staticClass:"thumbsUp_link"},[e("span",[t._v("标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题")])])]),e("div",{staticClass:"message_main_comment"},[e("div",{staticClass:"thumbsUp_avatar"},[e("img",{attrs:{src:a("86bb")}})]),e("div",{staticClass:"thumbsUp_show"},[e("span",[e("router-link",{attrs:{to:"/user/1d3a"}},[e("b",[t._v("作者")])]),t._v(" · 进行了评论")],1)]),e("div",{staticClass:"thumbsUp_link"},[e("span",[t._v("标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题标题")])])])]),e("div",{staticClass:"loading"},[t._v(t._s(t.noMore?"没有更多了":"加载中..."))])],2),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"article_aside"},[this.$route.params.id==t.loginId?e("div",{staticClass:"user_aside_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("个人资料")]),e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"14px"},on:{click:function(e){return t.sendUserVisible()}}},[t._v("点击查看")])])]):t._e(),e("div",{staticClass:"article_bulletin_area"},[e("div",{staticClass:"article_bulletin_tip"},[e("span",[t._v("关注的人")]),e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"14px"},on:{click:t.followClick}},[t._v("点击查看")])])]),e("div",{staticClass:"article_random_area"},[e("div",{staticClass:"article_random_tip"},[e("span",[t._v("粉丝")]),e("span",{staticStyle:{float:"right","margin-right":"15px","font-size":"14px"},on:{click:t.followedClick}},[t._v("点击查看")])])])])])],1)]),e("el-drawer",{attrs:{title:"关注列表",visible:t.followDrawer,direction:"rtl"},on:{"update:visible":function(e){t.followDrawer=e}}},[e("div",{staticClass:"user_follow"},t._l(t.followData,(function(a){return e("div",{key:a.id,staticClass:"user_follow_item"},[e("img",{attrs:{src:null==a.avatar?t.userImg:a.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.id}},[t._v(t._s(a.username))])],1)])})),0)]),e("el-drawer",{attrs:{title:"粉丝列表",visible:t.followedDrawer,direction:"rtl"},on:{"update:visible":function(e){t.followedDrawer=e}}},[e("div",{staticClass:"user_follow"},t._l(t.followedData,(function(a){return e("div",{key:a.id,staticClass:"user_follow_item"},[e("img",{attrs:{src:null==a.avatar?t.userImg:a.avatar}}),e("span",[e("router-link",{attrs:{target:"_blank",to:"/user/"+a.id}},[t._v(t._s(a.username))])],1)])})),0)]),t.userEditDialog?e("UserInfoEdit",{ref:"userEdit",on:{refreshUserInfo:t.getUserSimpleInfoById}}):t._e()],1)},Bt=[],Vt=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"个人资料",visible:t.userDialogVisible,width:"30%"},on:{"update:visible":function(e){t.userDialogVisible=e}}},[e("div",{staticClass:"user_info_item"},[e("span",[t._v("头像：")]),e("el-upload",{staticClass:"avatar-uploader",attrs:{action:"https://kkc-picture.oss-cn-shenzhen.aliyuncs.com",data:t.uploadData,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload}},[t.userInfo.avatar?e("img",{staticClass:"avatar",attrs:{src:t.userInfo.avatar}}):e("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e("div",{staticClass:"user_info_item"},[e("span",[t._v("用户id：")]),e("span",[t._v(t._s(t.userInfo.id))])]),e("div",{staticClass:"user_info_item"},[e("span",[t._v("用户名：")]),e("span",[t._v(t._s(t.userInfo.username))])]),e("div",{staticClass:"user_info_item"},[e("span",[t._v("邮箱：")]),e("span",[t._v(t._s(t.userInfo.email))])]),e("div",{staticClass:"user_info_item"},[e("span",[t._v("性别：")]),e("el-select",{attrs:{placeholder:"请选择"},model:{value:t.userInfo.sex,callback:function(e){t.$set(t.userInfo,"sex",e)},expression:"userInfo.sex"}},t._l(t.options,(function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),e("div",{staticClass:"user_info_item"},[e("span",[t._v("个人简介:")]),e("el-input",{attrs:{type:"textarea",autosize:{minRows:4,maxRows:4},placeholder:"请输入内容",resize:"none",maxlength:"150","show-word-limit":""},model:{value:t.userInfo.summary,callback:function(e){t.$set(t.userInfo,"summary",e)},expression:"userInfo.summary"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.pwdDialogVisible=!0}}},[t._v("修改密码")]),e("el-button",{attrs:{type:"primary"},on:{click:t.closeUserVisible}},[t._v("确 定")])],1)]),[e("el-dialog",{attrs:{title:"修改密码",visible:t.pwdDialogVisible,width:"20%","before-close":t.handleClose},on:{"update:visible":function(e){t.pwdDialogVisible=e}}},[e("div",{staticClass:"pwdStyle"},[e("el-input",{attrs:{type:"password",placeholder:"请输入原密码"},model:{value:t.password.oldPassword,callback:function(e){t.$set(t.password,"oldPassword",e)},expression:"password.oldPassword"}}),e("el-input",{attrs:{type:"password",placeholder:"请输入新密码"},model:{value:t.password.newPassword,callback:function(e){t.$set(t.password,"newPassword",e)},expression:"password.newPassword"}}),e("el-input",{attrs:{type:"password",placeholder:"重新输入新密码"},model:{value:t.password.surePassword,callback:function(e){t.$set(t.password,"surePassword",e)},expression:"password.surePassword"}})],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:t.updatePwdCancel}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.updatePwdComfirm}},[t._v("确 定")])],1)])]],2)},zt=[];function Ot(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>("x"===t?16*Math.random()|0:8).toString(16))}var Et={name:"UserInfoEdit",props:[],data(){return{fileList:[],userDialogVisible:!1,pwdDialogVisible:!1,options:[{value:"男",label:"男"},{value:"女",label:"女"}],userInfo:{id:1231234,username:"asdasd",email:"123123123@qq.com",sex:"男",avatar:a("86bb"),summary:""},password:{oldPassword:"",newPassword:"",surePassword:""},uploadData:{},tempFilename:""}},methods:{init(t){this.userDialogVisible=!0,y.getUserDetailById(t).then(t=>{let e=t.data.data;this.userInfo.id=e.id,this.userInfo.username=e.username,this.userInfo.email=e.email,this.userInfo.sex=e.sex,this.userInfo.avatar=e.avatar,this.userInfo.summary=e.summary})},getPolicy(){Y.getPolicy().then(t=>{let e=t.data.data;this.uploadData.key=e.dir,this.uploadData.policy=e.policy,this.uploadData.OSSAccessKeyId=e.accessid,this.uploadData.signature=e.signature,this.uploadData.host=e.host})},beforeAvatarUpload(t){this.getPolicy();let e=Ot()+"."+t.name.split(".")[1];this.uploadData.key=this.uploadData.key+e,this.tempFilename=e,console.log("beforeAvatarUpload："+JSON.stringify(this.uploadData))},handleAvatarSuccess(){this.userInfo.avatar=this.uploadData.host+"/"+this.uploadData.key+this.tempFilename},closeUserVisible(){let t={id:this.userInfo.id,sex:this.userInfo.sex,avatar:this.userInfo.avatar,summary:this.userInfo.summary};y.updateUserInfoByUser(t).then(t=>{200===t.data.code?(this.$message({message:t.data.data,type:"success"}),this.userDialogVisible=!1,this.$emit("refreshUserInfo")):this.$message({message:t.data.data,type:"error"})})},updatePwdComfirm(){this.pwdDialogVisible=!1,this.$message({message:"修改密码成功",type:"success"}),this.clearPwd()},updatePwdCancel(){this.pwdDialogVisible=!1,this.clearPwd()},clearPwd(){this.password.oldPassword="",this.password.newPassword="",this.password.surePassword=""}}},Mt=Et,jt=(a("e1ba"),Object(n["a"])(Mt,Vt,zt,!1,null,"66d3fb78",null)),Qt=jt.exports,Rt={name:"UserInfo",components:{UserInfoEdit:Qt},data(){return{isFollow:!1,conditionList:[{index:"10000",category:"我的文章"},{index:"10001",category:"我的问答"},{index:"10002",category:"我的消息"}],otherConditionList:[{index:"10000",category:"我的文章"},{index:"10001",category:"我的问答"}],conditionIndex:"10000",datas:[],followData:[],followedData:[],noMore:!1,isAchiveBottom:!1,articleFlag:!0,followDrawer:!1,followedDrawer:!1,userEditDialog:!1,userInfo:{id:100002,username:"kerco123",sex:"男",followerCount:1,followedCount:1,avatar:null,summary:null,createTime:"2023-01-14T07:13:01"},userOther:{originalCount:0,thumbsUpCount:0,viewsCount:0},userImg:a("86bb"),loginId:"",articleParams:{currentPage:1,isAchiveBottom:!1,noMore:!1},questionParams:{currentPage:1,isAchiveBottom:!1,noMore:!1},messageParams:{currentPage:1,isAchiveBottom:!1,noMore:!1},articleList:[],questionList:[],follow:{followId:null,userId:null}}},created(){window.onscroll=()=>{var t=document.documentElement.scrollTop||document.body.scrollTop,e=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight;t+e>=a-20&&!this.isAchiveBottom&&!this.noMore&&("10000"==this.conditionIndex?this.articleParams.isAchiveBottom=!0:"10001"==this.conditionIndex&&(this.questionParams.isAchiveBottom=!0),setTimeout(()=>{"10000"==this.conditionIndex?(this.articleParams.currentPage+=1,this.getUserPublishArticleList(),this.articleParams.isAchiveBottom=!1):"10001"==this.conditionIndex&&(this.questionParams.currentPage+=1,this.getUserPublishArticleList(),this.questionParams.isAchiveBottom=!1)},500))}},beforeMount(){this.getUserInfo()},mounted(){this.follow.followId=this.$route.params.id,this.getUserSimpleInfoById(),this.getUserAchievementById(this.$route.params.id),this.handleSelect2("10000")},methods:{getUserInfo(){let t=f.a.get("token");void 0!==t&&y.getUserInfo().then(t=>{let e=t.data.data;this.loginId=e.id,this.follow.userId=e.id,this.checkUserFollow()})},getUserSimpleInfoById(){let t=this.$route.params.id;y.getUserSimpleInfoById(t).then(t=>{let e=t.data.data;this.userInfo.id=e.id,this.userInfo.username=e.username,this.userInfo.sex=e.sex,this.userInfo.followerCount=e.followerCount,this.userInfo.followedCount=e.followedCount,this.userInfo.avatar=e.avatar,this.userInfo.summary=e.summary,this.userInfo.createTime=e.createTime})},getUserAchievementById(t){y.getUserAchievementById(t).then(t=>{let e=t.data.data;this.userOther.originalCount=e.originalCount,this.userOther.thumbsUpCount=e.thumbsUpCount,this.userOther.viewsCount=e.viewsCount})},checkUserFollow(){let t=f.a.get("token");void 0!==t&&y.checkUserFollow(this.follow).then(t=>{this.isFollow=t.data.data})},authorFollow(){let t=f.a.get("token");if(void 0===t)return this.$message({message:"请先登陆后在操作",type:"warning"}),void this.$router.push({path:"/login"});y.userFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"关注成功",type:"success"}),this.isFollow=!0)})},undoAuthorFollow(){y.userCancelFollow(this.follow).then(t=>{t.data.data&&(this.$message({message:"取消关注成功",type:"success"}),this.isFollow=!1)})},getUserPublishArticleList(){1==this.articleParams.currentPage?y.getUserPublishArticleList(this.$route.params.id,this.articleParams.currentPage).then(t=>{this.articleList=t.data.data,(void 0===this.articleList||t.data.data.length<10)&&(this.noMore=!0,this.articleParams.noMore=!0)}):y.getUserPublishArticleList(this.$route.params.id,this.articleParams.currentPage).then(t=>{if(void 0===t.data.data)return this.noMore=!0,void(this.articleParams.noMore=!0);this.articleList=this.articleList.concat(t.data.data),t.data.data.length<10&&(this.noMore=!0,this.articleParams.noMore=!0)})},getUserPublishQuestionList(){1==this.questionParams.currentPage?y.getUserPublishQuestionList(this.$route.params.id,this.questionParams.currentPage).then(t=>{this.questionList=t.data.data,(void 0===this.questionList||t.data.data.length<10)&&(this.noMore=!0,this.questionParams.noMore=!0)}):y.getUserPublishQuestionList(this.$route.params.id,this.questionParams.currentPage).then(t=>{if(void 0===t.data.data)return this.noMore=!0,void(this.articleParams.noMore=!0);this.questionList=this.questionList.concat(t.data.data),t.data.data.length<10&&(this.noMore=!0,this.questionParams.noMore=!0)})},handleSelect2(t){this.conditionIndex=t,"10000"==t?(this.noMore=this.articleParams.noMore,this.isAchiveBottom=this.articleParams.isAchiveBottom,this.getUserPublishArticleList()):"10001"==t&&(this.noMore=this.questionParams.noMore,this.isAchiveBottom=this.questionParams.isAchiveBottom,this.getUserPublishQuestionList())},sendUserVisible(){this.userEditDialog=!0,this.$nextTick(()=>{this.$refs.userEdit.init(this.$route.params.id)})},refreshUserInfo(){this.userEditDialog=!1,this.getUserSimpleInfoById()},followClick(){this.followDrawer=!0,this.followData.length>0||y.getUserFollowList(this.$route.params.id).then(t=>{this.followData=t.data.data})},followedClick(){this.followedDrawer=!0,this.followedData.length>0||y.getUserFollowedList(this.$route.params.id).then(t=>{this.followedData=t.data.data})}}},Wt=Rt,Kt=(a("1625"),Object(n["a"])(Wt,Ht,Bt,!1,null,"552b949d",null)),Jt=Kt.exports;let Nt=new m["a"]({mode:"history",routes:[{name:"Index",path:"/",component:x},{name:"login",path:"/login",component:D},{name:"register",path:"/register",component:B},{name:"articleList",path:"/article",component:j},{name:"articleWrite",path:"/article/write",component:it},{name:"articleDetail",path:"/article/:id",component:N},{name:"questionList",path:"/question",component:dt},{name:"questionWrite",path:"/question/write",component:wt},{name:"questionDetail",path:"/question/:id",component:_t},{name:"keySearch",path:"/search/:key",component:qt},{name:"tagSearch",path:"/tag/:id",component:Ft},{name:"userInfo",path:"/user/:id",component:Jt}]});Nt.beforeEach((t,e,a)=>{if("/article/write"===t.path||"/question/write"===t.path){let t=f.a.get("token");void 0!==t?a():a({path:"/login",params:{error:100}})}else a()});var Gt=Nt,Xt=a("b2d8"),Yt=a.n(Xt),Zt=(a("64e1"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("el-row",[e("el-col",{attrs:{span:5}},[e("div",{staticClass:"header_logo"},[e("router-link",{attrs:{to:"/"}},[t._v("AATTS")])],1)]),e("el-col",{attrs:{span:7}},[e("div",{staticClass:"header_nav"},[e("router-link",{attrs:{to:"/article"}},[t._v("文章")]),e("router-link",{attrs:{to:"/question"}},[t._v("问答")]),e("a",{on:{click:t.articleWriteClick}},[e("i",{staticClass:"el-icon-edit-outline"}),t._v(" 写文章")]),e("a",{on:{click:t.questionWriteClick}},[e("i",{staticClass:"el-icon-edit-outline"}),t._v(" 提问题")])],1)]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"header_search"},[e("el-input",{staticStyle:{height:"20px"},attrs:{id:"nav_search",placeholder:"请输入你想搜索的文章或问题"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}},[e("i",{staticClass:"el-icon-search search_button",attrs:{slot:"suffix"},on:{click:t.searchClick},slot:"suffix"})])],1)]),e("el-col",{attrs:{span:4}},[e("div",{staticClass:"header_user"},[e("router-link",{attrs:{target:"_blank",to:"/user/"+t.id}},[e("img",{attrs:{src:t.avatar_url}})]),0==t.username.length?e("span",[e("router-link",{attrs:{to:"/login"}},[t._v("请登录")])],1):e("span",[e("el-popover",{attrs:{trigger:"hover"}},[e("el-button",{attrs:{type:"text"},on:{click:t.logout}},[t._v("退出登录")]),e("template",{slot:"reference"},[e("router-link",{attrs:{target:"_blank",to:"/user/"+t.id}},[t._v(t._s(t.username))])],1)],2)],1)],1)])],1)],1)}),te=[],ee={data(){return{id:"",input:"",avatar_url:a("86bb"),username:""}},mounted(){this.getUserInfo(),this.$bus.$on("loginRefresh",this.getUserInfo)},methods:{getUserInfo(){let t=f.a.get("token");void 0!==t&&y.getUserInfo().then(t=>{let e=t.data.data;this.id=e.id,null!=e.avatar&&(this.avatar_url=e.avatar),this.username=e.username})},searchClick(){this.input.length>0&&(this.$router.push({path:"/search/"+this.input}),this.$emit("refreshSearchList"))},logout(){y.logout().then(()=>{this.$message({message:"退出成功",type:"success"}),f.a.remove("token"),this.id="",this.avatar_url=a("86bb"),this.username=""})},articleWriteClick(){f.a.get("token")?this.$router.push({path:"/article/write"}):(this.$message({message:"请先登陆",type:"warning"}),this.$router.push({path:"/login"}))},questionWriteClick(){f.a.get("token")?this.$router.push({path:"/question/write"}):(this.$message({message:"请先登陆",type:"warning"}),this.$router.push({path:"/login"}))}},beforeDestory(){this.$bus.$off("loginRefresh")}},ae=ee,se=(a("6c40"),Object(n["a"])(ae,Zt,te,!1,null,"0f435056",null)),ie=se.exports,re=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"footer"},[e("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("意见反馈")]),e("a",{attrs:{href:"javascript:void(0)"}},[t._v("关于我们")]),e("a",{attrs:{href:"javascript:void(0)"}},[t._v("微博专区")])]),[e("el-dialog",{attrs:{title:"意见反馈",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("span",[t._v("有什么要建议的吗，请在下方输入~")]),e("el-input",{staticStyle:{"margin-top":"10px"},attrs:{type:"textarea",autosize:{minRows:6,maxRows:6},rows:2,placeholder:"请输入内容",maxlength:"150","show-word-limit":"",resize:"none"},model:{value:t.textarea,callback:function(e){t.textarea=e},expression:"textarea"}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.adviceClick}},[t._v("确 定")])],1)],1)]],2)},oe=[],le={name:"Footer",data(){return{dialogVisible:!1,textarea:""}},methods:{adviceClick(){this.dialogVisible=!1,this.textarea=""}}},ne=le,ce=(a("f7ee"),Object(n["a"])(ne,re,oe,!1,null,"bf30adb2",null)),de=ce.exports;const ue={install(t){t.component("Header",ie),t.component("Footer",de)}};var he=ue;s["default"].config.productionTip=!1,h.a.Dialog.props.lockScroll.default=!1,s["default"].use(h.a),s["default"].use(m["a"]),s["default"].use(Yt.a),s["default"].use(he),new s["default"]({render:t=>t(d),beforeCreate(){s["default"].prototype.$bus=this},router:Gt}).$mount("#app")},"619a":function(t,e,a){t.exports=a.p+"static/img/3.4ec347b7.png"},"6c40":function(t,e,a){"use strict";a("9b39")},"6d56":function(t,e,a){},7529:function(t,e,a){"use strict";a("85b1")},8054:function(t,e,a){},"81e5":function(t,e,a){t.exports=a.p+"static/img/2.b69fc5c3.png"},"85b1":function(t,e,a){},"86bb":function(t,e,a){t.exports=a.p+"static/img/nologin.37c3ea6b.png"},8776:function(t,e,a){"use strict";a("d84d")},"8bf8":function(t,e,a){},"8ddd":function(t,e,a){},"950b":function(t,e,a){},"9b39":function(t,e,a){},a210:function(t,e,a){},a639:function(t,e,a){},a81f:function(t,e,a){"use strict";a("8054")},bbdd:function(t,e,a){"use strict";a("a639")},be87:function(t,e,a){"use strict";a("e473")},c1c5:function(t,e,a){t.exports=a.p+"static/img/1.7703c1b8.png"},c441:function(t,e,a){},c656:function(t,e,a){},d84d:function(t,e,a){},dbea:function(t,e,a){"use strict";a("e24c")},e1ba:function(t,e,a){"use strict";a("a210")},e24c:function(t,e,a){},e473:function(t,e,a){},f7ee:function(t,e,a){"use strict";a("8ddd")}});
//# sourceMappingURL=app.076f07db.js.map